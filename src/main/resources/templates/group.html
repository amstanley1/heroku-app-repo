<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
	integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
	crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="theme.css">
<link rel="stylesheet" type="text/css" href="group.css">

</head>

<body>


	<main> <img id="icon" src="icon.svg">
	<section class="panel">
		<div th:each="group: ${groups}">
			<h2 th:text="${group.groupName}"></h2>
			<title th:text="${group.groupName}"></title>
		</div>
	</section>


	<section class="panel">
		<h2>Members</h2>
		<div class="gridContainer">
		<div th:each="reader: ${readers}">
			<a th:href="@{reader(id=${reader.id})}"><i class="fas fa-user"></i><span
				th:text="${reader.username}"></span></a>
		</div>
		</div>
	</section>
	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Add a reader</h2>
			<form method="POST" th:action="@{/addReader}">
				<input type="text" placeholder="Reader's Username" name="username">
				<input type="hidden" th:value="${group.id}" name="id"> <input
					type="submit">
			</form>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Delete a reader</h2>
			<form method="GET" th:action="@{/deleteReader}">
				<input type="text" placeholder="Reader's Username" name="username">
				<input type="hidden" th:value="${group.id}" name="id"> <input
					type="submit">
			</form>
		</div>
	</section>

	<section class="panel">
		<h2>Books</h2>
		<table>

			<div th:each="groupBook: ${groupBooks}">
				<tr>
					<th><i class="fas fa-book-reader"></i><a
						th:href="@{groupBook(id=${groupBook.id})}"
						th:text="${groupBook.title}" id="stubborn"></a></th>
					<th><span th:text="${groupBook.author}"></span></th>
				</tr>

			</div>
		</table>
	</section>


	<section class="panel">
		<h2>Add a book</h2>
		<div th:each="group: ${groups}">
			<form id="bookForm" method="POST" th:action="@{/addBook}">
				<input id="booktitle" type="text" placeholder="Enter book name"
					name="book"> <input type="text"
					placeholder="Enter author name" name="author"> <input
					type="hidden" th:value="${group.id}" name="id"> <input
					id="pageCount" type="hidden" name="pageCount"> <input
					id="button" type="button" value="Submit">
			</form>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Create a new question</h2>
			<form method="POST" th:action="@{/addQuestion}">
				<input type="text" placeholder="Question" name="content"> <input
					type="hidden" th:value="${group.id}" name="id"> <input
					type="submit">
			</form>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Groups discussion questions</h2>
			<div class="panel" th:each="question: ${questions}">
				<span th:text="${question.content}"></span> <a
					th:href="@{/removeQuestion/{questId}/{groupId}(questId=${question.id} , groupId=${group.id})}">[delete]</a>

				<div class="panel" th:each="answer:${question.getAnswers()}">
					<ul>

						<li th:text="${answer.getReader().username} + ':'"
							class="discussionAnswerUsername"></li>
						<li class="answer" th:text="${answer.content}"></li>
					</ul>
				</div>

			</div>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Create a new goal</h2>
			<form method="POST" th:action="@{/addGoal}">
				<input type="text" placeholder="Goal Name" name="name"> <input
					type="hidden" th:value="${group.id}" name="id"> <input
					type="submit">
			</form>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Group goals</h2>
			<div th:each="goal: ${goals}">
				<i class="fas fa-star"></i><span th:text="${goal.name}"></span> <a
					th:href="@{/removeGoal/{goalId}/{groupId}(goalId=${goal.id} , groupId=${group.id})}">[delete]</a>
			</div>
		</div>
	</section>

	<section class="panel">
		<div th:each="group: ${groups}">
			<h2>Delete a goal</h2>
			<form method="GET" th:action="@{/deleteGoal}">
				<input type="text" placeholder="Group Name" name="name"> <input
					type="hidden" th:value="${group.id}" name="id"> <input
					type="submit">
			</form>
		</div>
	</section>

	<div class="panel">

		<div th:each="group: ${groups}">
			<h2>Group Message Board</h2>

			<div class="panel" th:each="post: ${posts}">
				<ul>
					<li th:text="${post.getReader().username}"></li>
					<li th:text="${post.content}"></li>
				</ul>
			</div>

			<form method="POST" th:action="@{/savePost}">
				<textarea rows="4" cols="75" name="newPost" placeholder="New Post"
					required></textarea>
				<input type="hidden" th:value="${group.id}" name="groupid">
				<input type="submit" id="messageBoardSubmit">

			</form>
		</div>
	</div>


	<section class="panel">
		<a href="http://localhost:8080/groups">Back to Groups</a></br> <a
			href="http://localhost:8080/readers">Back to Readers</a>
	</section>
	</main>
	<script src='./group.js'></script>


</body>
</html>